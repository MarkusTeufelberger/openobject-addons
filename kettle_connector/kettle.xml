<?xml version="1.0" encoding="UTF-8"?>

<openerp>
	<data>

		<record id="kettle_transformation_form" model="ir.ui.view">
			<field name="name">kettle.transformation.form</field>
			<field name="priority">20</field>
			<field name="model">kettle.transformation</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="kettle transformation">
					<group colspan="4">
				        <field name="name" select="1"/>
				        <field name="kettle_dir"/>
				        <field name="file_name"/>
				        <field name="scheduler"/>
				        <field name="active_python_code"/>
				        <separator colspan="4" string="Parameters" />
				        <field name="parameters" colspan = "4" nolabel="1"/>
			        </group> 
			        <group attrs="{'invisible':[('active_python_code','!=',1)]}"  colspan="4">
				        <separator colspan="4" string="Python Code Executed Before Transformation" />
				        <field name="python_code_before" colspan = "4" nolabel="1"/>				        
				        <separator colspan="4" string="Python Code Executed After Transformation" />
				        <field name="python_code_after" colspan = "4" nolabel="1"/>
			        </group>
				</form>
			</field>
		</record>
		
		<record id="kettle_transformation_tree" model="ir.ui.view">
			<field name="name">kettle.transformation.tree</field>
			<field name="priority">20</field>
			<field name="model">kettle.transformation</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="kettle transformation">
			        <field name="name" select="1"/>
			        <field name="kettle_dir"/>
			        <field name="file_name"/>
			        <field name="scheduler"/>
				</tree>
			</field>
		</record>
		
		<record id="action_kettle_transformation" model="ir.actions.act_window">
			<field name="name">kettle transformation</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kettle.transformation</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{'wizard_object' : 'kettle.wizard', 'function' : 'start_kettle_tranformation', 'object_link' : 'kettle.transformation' }</field>
		</record>


		<record id="kettle_wizard" model="ir.ui.view">
			<field name="name">kettle.wizard.form</field>
			<field name="priority">20</field>
			<field name="model">kettle.wizard</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="kettle starter">
					<group>
				    	<separator colspan="4" string="Start Kettle Transformation" />
				        <button icon="gtk-cancel" special="cancel" string="Cancel"/>
				        <button icon="gtk-ok" name="action_start_tranformation" string="Start" type="object"/>
 					</group>
 				</form>
			</field>
		</record>
		
		<record id="action_kettle_wizard" model="ir.actions.act_window">
			<field name="name">Start Transformation</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kettle.wizard</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="target">new</field>
			<field name="context">{}</field>
		</record>

		<record id="ir_action_start_kettle_transformation" model="ir.values">
			<field name="key2">client_action_multi</field>
			<field name="model">kettle.transformation</field>
			<field name="name">Start Transformation</field>
			<field eval="'ir.actions.act_window,%d'%action_kettle_wizard" name="value"/>
			<field eval="True" name="object"/>
		</record>


		<menuitem id="menu_kettle_connection" name="kettle-connection"/>
		
		<menuitem action="action_kettle_transformation" id="kettle transformation" parent="menu_kettle_connection"/>

		<record id="ir_action_create_scheduler_in_kettle" model="ir.values">
			<field name="key2">client_action_multi</field>
			<field name="model">kettle.transformation</field>
			<field name="name">Create a Scheduler</field>
			<field eval="'ir.actions.act_window,%d'%ref('base_scheduler_creator.action_scheduler_creator_wizard')" name="value"/>
			<field eval="True" name="object"/>
		</record>
		

    </data>
</openerp>
