<?xml version="1.0"?>
<openerp>
<data>

	<menuitem name="Extractions" id="menu_dm_config_extract" parent="dm.menu_dm_config" sequence="4"/>

    <!--
    =======================================================
    SEGMENTATION STEP TYPE VIEWS
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_segmentation_type_form">
        <field name="name">dm.segmentation.type.form</field>
        <field name="model">dm.segmentation.type</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Segmentation Types">
                <field name="name"/>
                <field name="code"/>
                <field name="mode"/>
             </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_segmentation_type_tree">
        <field name="name">dm.segmentation.type.tree</field>
        <field name="model">dm.segmentation.type</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Segmentation Types">
               <field name="name"/>
                <field name="code"/>
                <field name="mode"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_segmentation_type_form">
        <field name="name">All Segmentation Types</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.segmentation.type</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_dm_segmentation_type_tree"/>
    </record>
	
    <menuitem id="menu_action_dm_segmentation_type_form" parent="dm_extract.menu_dm_config_extract" action="action_dm_segmentation_type_form" sequence="0" />
   
  
      <!--
    =======================================================
    SEGMENTATION VIEWS
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_segmentation_form">
        <field name="name">dm.segmentation.form</field>
        <field name="model">dm.segmentation</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Segmentation">
            <separator string="Segmentation Informations" colspan="4"/>
                <field name="name" select="1"/>
                <field name="code" select="1"/>
                <notebook colspan="4">
                    <page string="General">
                        <separator string="Description" colspan="4"/>
                        <field name="notes" nolabel="1" select="2" colspan="4" widget="text_wiki"/>
                     	<field name="active_only"/>
                    </page>
                    <page string="Steps">
                       <field name="step_ids" nolabel="1" colspan="4" />
                    </page>
                </notebook>
           </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_segmentation_tree">
        <field name="name">dm.segmentation.tree</field>
        <field name="model">dm.segmentation</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Segmentation">
               <field name="name"/>
               <field name="code"/>
               <field name="active_only"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_segmentation_form">
        <field name="name">All Segmentations</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.segmentation</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_dm_segmentation_tree"/>
    </record>
	
    <menuitem id="menu_action_dm_segmentation_form" parent="dm_extract.menu_dm_config_extract" action="action_dm_segmentation_form" sequence="1" />
    <!--
    =======================================================
    SEGMENTATION STEP VIEWS
    =======================================================
    -->

    <record model="ir.ui.view" id="view_dm_segmentation_step_form">
        <field name="name">dm.segmentation.step.form</field>
        <field name="model">dm.segmentation.step</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Segmentation Steps">
            	<notebook colspan="4">
                    <page string="General">
                     <group colspan="4">
		                <field name="name"/>
		                <field name="mode"/>
		                <field name="segmentation_id"/>
		                <field name="type_id" on_change="on_change_segment_type(type_id)"/>
		                <field name="segment_type" on_change="on_change_segment_type(type_id)" invisible="1"/>
		                <field name="next_step_id" colspan="4"/>
		                 <field name="previous_step_ids" colspan="4" height="200"/>
		          </group>
		                <group attrs="{'invisible':[('segment_type','!=','campaign')]}">
			                <field name="campaign_id"/>
			                <field name="proposition_id"/>
			                <field name="segment_id"/>
			                <field name="offer_id"/>
			                <field name="trademark_id"/>
			                <field name="dealer_id"/>
			                <field name="country_id"/>
			                <field name="currency_id"/>
	               		</group>
	                </page>
	               <page string="Customers">
	               <group attrs="{'invisible':[('segment_type','!=','customer')]}">
                        <field name="address_text_criteria_ids" colspan="2" nolabel="1" select="2" height="232">
                            <form string="Customer Textual Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
	                      </form>
                            <tree string="Customer Textual Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
		                      </tree>
		                </field>
                        <field name="address_numeric_criteria_ids" colspan="2" nolabel="1" select="2" height="232">
                            <form string="Customer Numeric Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Numeric Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                        <field name="address_boolean_criteria_ids" colspan="2" nolabel="1" select="2" height="232">
                            <form string="Customer Boolean Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Boolean Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                        <field name="address_date_criteria_ids" colspan="2" nolabel="1" select="2" height="232">
                            <form string="Customer Date Criteria">
                                <field name="field_id"/>
                                <field name="operator" nolabel="1"/>
                                <field name="value" nolabel="1"/>
                            </form>
                            <tree string="Customer Date Criteria">
                                <field name="field_id"/>
                                <field name="operator"/>
                                <field name="value"/>
                            </tree>
                        </field>
                   	</group>
                    </page>
                </notebook>
             </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_dm_segmentation_step_tree">
        <field name="name">dm.segmentation.step.tree</field>
        <field name="model">dm.segmentation.step</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Segmentation Steps">
               <field name="name"/>
                <field name="mode"/>
                <field name="type_id"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_dm_segmentation_step_form">
        <field name="name">All Segmentation Steps</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dm.segmentation.step</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_dm_segmentation_step_tree"/>
    </record>
	
    <menuitem id="menu_action_dm_segmentation_step_form" parent="dm_extract.menu_dm_config_extract" action="action_dm_segmentation_step_form" sequence="1" />
    
    <record id="view_dm_campaign_proposition_segments" model="ir.ui.view">
	   <field name="name">dm_campaign_proposition_segments</field>
	   <field name="model">dm.campaign.proposition.segment</field>
	   <field name="inherit_id" ref="dm.view_campaign_proposition_segment_form"/>
	   <field name="type">form</field>
	   <field name="arch" type="xml">
   			<notebook colspan="4" position="inside">
     			<page string="Extraction">
	  				<field name="segmentation_id" string="Segmentation"/>
 				</page>
     		</notebook>
   		</field>
  </record>
     
    </data>
</openerp>
    
