<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!--  Wizard for Multi Charts of Accounts -->

        <record id="view_update_multi_chart" model="ir.ui.view">
            <field name="name">Update Chart of Accounts from a Chart Template</field>
            <field name="model">wizard.update.charts.accounts</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Update Chart of Accounts from a Chart Template">
					<group col="4" colspan="4" attrs="{'invisible':[('state','!=','one')]}">
                        <separator col="4" colspan="4" string="Generate Chart of Accounts from a Chart Template"/>
                        <label align="0.0" string="This will automatically updates your chart of accounts, taxes and fiscal positions according to the selected template" colspan="4"/>
                        <field name="company_id" on_change="onchange_company_id(company_id)"/>
                        <field name="code_digits"/>
                        <field name="chart_template_id"/>
                        <separator string="Existing records are updated? (by default only new ones are created)" colspan="4"/>
                        <field name="update_tax_code"/>
                        <field name="update_tax"/>
                        <field name="update_account"/>
                        <field name="update_fiscal_position"/>
					</group>
					<group col="4" colspan="4" attrs="{'invisible':[('state','!=','two')]}">
                        <separator colspan="4" string="Creation of account chart objects"/>
                        <field name="tax_code_ids" colspan="4" nolabel="1" mode="tree">
                            <tree string="Tax codes">
                                <field name="tax_code_id"/>
                            </tree>
                        </field>
                        <field name="tax_ids" colspan="4" nolabel="1" mode="tree">
                            <tree string="Taxes">
                                <field name="tax_id"/>
                            </tree>
                        </field>
                        <field name="account_ids" colspan="4" nolabel="1" mode="tree">
                            <tree string="Accounts">
                                <field name="account_id"/>
                            </tree>
                        </field>
                        <field name="fiscal_position_ids" colspan="4" nolabel="1" mode="tree">
                            <tree string="Fiscal positions">
                                <field name="fiscal_position_id"/>
                            </tree>
                        </field>
					</group>
					<group col="4" colspan="4" attrs="{'invisible':[('state','!=','done'),]}">
                        <separator colspan="4" string="Logs"/>
                        <field name="logs" colspan="4" nolabel="1"/>
                        <separator colspan="4" string="Creation of account chart objects"/>
                        <field name="new_tax_code"/>
                        <field name="new_tax"/>
                        <field name="new_account"/>
                        <field name="new_fp"/>
					</group>
					<group col="4" colspan="4" attrs="{'invisible':[('state','=','one'),]}">
                        <separator colspan="4" string="Update of account chart objects"/>
                        <field name="updated_tax_code"/>
                        <field name="updated_tax"/>
                        <field name="updated_account"/>
                        <field name="updated_fp"/>
					</group>
                    <separator string="" colspan="4"/>
                    <group col="7" colspan="4">
                        <field name="state"/>
                        <button icon="gtk-cancel" special="cancel" string="Cancel" states="one,two"/>
                        <button icon="gtk-go-forward" name="action_show" string="Next" type="object" states="one"/>
                        <button icon="gtk-go-back" name="action_one" string="Previous" type="object" states="two"/>
                        <button icon="gtk-ok" name="action_update" string="Create/Update" type="object" states="two"/>
                        <button icon="gtk-ok" special="cancel" string="Ok" type="object" states="done"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="action_wizard_update_chart" model="ir.actions.act_window">
            <field name="name">Update Chart of Accounts from a Chart Template</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">wizard.update.charts.accounts</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <menuitem parent="account.account_template_folder" action="action_wizard_update_chart" id="menu_wizard"/>

    </data>
</openerp>
